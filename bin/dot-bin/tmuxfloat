#! /bin/bash

session="floating"
searchresult=$(tmux list-sessions | \ag $session)

# Check if $session exists
if [[ $searchresult =~ "${session}" ]]; then
  # $session is there, attached?
  if [[ ! $searchresult =~ "attached" ]]; then
    # Reattach it 
    #echo "Not attached, attach it"
    tmux popup -d "#{pane_current_path}" -h 80% -w 80%  -E "tmux new-session -A -s $session"
  else
    # Destory it
    #echo "Already attached, destroy it"
    tmux kill-session -t $session
  fi 
else 
  # $session is not there, create it 
  #echo "First time"
  tmux popup -d "#{pane_current_path}" -h 80% -w 80%  -E "tmux new-session -A -s $session"
fi 
